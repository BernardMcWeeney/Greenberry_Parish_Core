(()=>{"use strict";var e={n:r=>{var o=r&&r.__esModule?()=>r.default:()=>r;return e.d(o,{a:o}),o},d:(r,o)=>{for(var s in o)e.o(o,s)&&!e.o(r,s)&&Object.defineProperty(r,s,{enumerable:!0,get:o[s]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=window.wp.blocks,o=window.wp.data,s=window.wp.blockEditor,a=window.wp.components,t=window.wp.i18n,i=window.wp.coreData,l=window.wp.element,n=window.ReactJSXRuntime;(0,r.registerBlockType)("parish/church-selector",{title:(0,t.__)("Church Selector","parish-core"),description:(0,t.__)("Select a parish church or enter a custom church name.","parish-core"),icon:"building",category:"widgets",supports:{html:!1,multiple:!1},usesContext:["postType","postId"],edit:function({context:e}){const r=(0,s.useBlockProps)(),{postType:c,postId:h}=e,[p,_]=(0,l.useState)(!1),[d,u]=(0,i.useEntityProp)("postType",c,"meta",h),x=d?.parish_related_church||0,g=d?.parish_church_name||"",y=(0,o.useSelect)(e=>e("core").getEntityRecords("postType","parish_church",{per_page:-1,_fields:["id","title"],orderby:"title",order:"asc"}),[]);if((0,l.useEffect)(()=>{g&&!x&&_(!0)},[g,x]),void 0===y)return(0,n.jsxs)("div",{...r,children:[(0,n.jsx)(a.Spinner,{})," ",(0,t.__)("Loading churches...","parish-core")]});const m=[{label:(0,t.__)("-- Select a parish church --","parish-core"),value:"0"},...(y||[]).map(e=>({label:e.title.rendered||(0,t.__)("(no title)","parish-core"),value:String(e.id)}))],C=y?.find(e=>e.id===x),j=p?g:C?.title?.rendered||"";return(0,n.jsxs)("div",{...r,children:[(0,n.jsx)(s.InspectorControls,{children:(0,n.jsxs)(a.PanelBody,{title:(0,t.__)("Church Selection","parish-core"),initialOpen:!0,children:[(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Use custom church name","parish-core"),help:p?(0,t.__)("Enter a church name that is not in the parish.","parish-core"):(0,t.__)("Select from parish churches.","parish-core"),checked:p,onChange:e=>{_(e),u(e?{...d,parish_related_church:0}:{...d,parish_church_name:""})}}),!p&&(0,n.jsx)(a.SelectControl,{label:(0,t.__)("Parish Church","parish-core"),value:String(x),options:m,onChange:e=>{const r=parseInt(e,10)||0;u({...d,parish_related_church:r,parish_church_name:r>0?"":g})},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),p&&(0,n.jsx)(a.TextControl,{label:(0,t.__)("Church Name","parish-core"),value:g,onChange:e=>{u({...d,parish_church_name:e,parish_related_church:0})},placeholder:(0,t.__)("Enter church name...","parish-core")})]})}),(0,n.jsxs)("div",{className:"parish-church-selector",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:(0,t.__)("Church:","parish-core")})," ",j||(0,n.jsx)("em",{children:(0,t.__)("Not selected","parish-core")})]}),p&&(0,n.jsx)("small",{children:(0,t.__)("(Custom entry)","parish-core")})]})]})},save:()=>null});const c=window.wp.serverSideRender;var h=e.n(c);const p=(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),(0,n.jsx)("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),(0,n.jsx)("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),(0,n.jsx)("line",{x1:"3",x2:"21",y1:"10",y2:"10"}),(0,n.jsx)("circle",{cx:"12",cy:"15",r:"3"}),(0,n.jsx)("path",{d:"M12 13v2l1 1"})]}),_=[{value:"",label:(0,t.__)("All Types","parish-core")},{value:"mass",label:(0,t.__)("Mass Only","parish-core")},{value:"confession",label:(0,t.__)("Confession Only","parish-core")},{value:"adoration",label:(0,t.__)("Adoration Only","parish-core")},{value:"rosary",label:(0,t.__)("Rosary Only","parish-core")}];(0,r.registerBlockType)("parish/mass-schedule",{title:(0,t.__)("Mass Schedule","parish-core"),description:(0,t.__)("Display liturgical schedules for a church with Font Awesome icons. Works in Query Loops.","parish-core"),icon:p,category:"widgets",keywords:[(0,t.__)("mass","parish-core"),(0,t.__)("schedule","parish-core"),(0,t.__)("times","parish-core"),(0,t.__)("church","parish-core"),(0,t.__)("liturgy","parish-core")],usesContext:["postType","postId"],edit:function({attributes:e,setAttributes:r,context:o}){const i=(0,s.useBlockProps)(),{showIcon:l,showLivestream:c,showSpecial:p,showAllDays:d,eventType:u,iconColor:x,timeColor:g}=e;return(0,n.jsxs)("div",{...i,children:[(0,n.jsxs)(s.InspectorControls,{children:[(0,n.jsxs)(a.PanelBody,{title:(0,t.__)("Display Settings","parish-core"),initialOpen:!0,children:[(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Show Clock Icon","parish-core"),help:(0,t.__)("Display clock icon at the start of each row.","parish-core"),checked:!1!==l,onChange:e=>r({showIcon:e}),__nextHasNoMarginBottom:!0}),(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Show All Days","parish-core"),help:(0,t.__)('Show all days of the week, with "No Mass" for days without scheduled masses.',"parish-core"),checked:d,onChange:e=>r({showAllDays:e}),__nextHasNoMarginBottom:!0}),(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Show Livestream Indicators","parish-core"),help:(0,t.__)("Display video icon for livestreamed services.","parish-core"),checked:c,onChange:e=>r({showLivestream:e}),__nextHasNoMarginBottom:!0}),(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Show Special Events","parish-core"),help:(0,t.__)("Include Holy Days and special liturgical events.","parish-core"),checked:p,onChange:e=>r({showSpecial:e}),__nextHasNoMarginBottom:!0}),(0,n.jsx)(a.SelectControl,{label:(0,t.__)("Event Type Filter","parish-core"),value:u,options:_,onChange:e=>r({eventType:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})]}),(0,n.jsxs)(a.PanelBody,{title:(0,t.__)("Colors","parish-core"),initialOpen:!1,children:[(0,n.jsx)(a.BaseControl,{label:(0,t.__)("Icon Color","parish-core"),help:(0,t.__)("Color for clock and video icons. Leave empty to use theme accent color.","parish-core"),__nextHasNoMarginBottom:!0,children:(0,n.jsx)(a.ColorPicker,{color:x||"#609fae",onChange:e=>r({iconColor:e}),enableAlpha:!1})}),(0,n.jsx)(a.BaseControl,{label:(0,t.__)("Time Color","parish-core"),help:(0,t.__)("Color for time text. Leave empty to use theme accent color.","parish-core"),__nextHasNoMarginBottom:!0,children:(0,n.jsx)(a.ColorPicker,{color:g||"#609fae",onChange:e=>r({timeColor:e}),enableAlpha:!1})})]})]}),(0,n.jsx)(h(),{block:"parish/mass-schedule",attributes:e,urlQueryArgs:{post_id:o.postId},EmptyResponsePlaceholder:()=>(0,n.jsx)("div",{className:"parish-mass-schedule-placeholder",children:(0,n.jsx)("p",{children:(0,t.__)("Mass Schedule — Add this block inside a Church Query Loop to display the schedule.","parish-core")})}),ErrorResponsePlaceholder:()=>(0,n.jsx)("div",{className:"parish-mass-schedule-error",children:(0,n.jsx)("p",{children:(0,t.__)("Error loading schedule. Make sure this block is inside a Church Query Loop.","parish-core")})})})]})},save:()=>null});const d=(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M10 2v4"}),(0,n.jsx)("path",{d:"M8 4h4"}),(0,n.jsx)("path",{d:"M10 6v4"}),(0,n.jsx)("path",{d:"M3 10l7-6 7 6"}),(0,n.jsx)("path",{d:"M3 22V10"}),(0,n.jsx)("path",{d:"M17 22V10"}),(0,n.jsx)("path",{d:"M3 22h14"}),(0,n.jsx)("rect",{x:"7",y:"14",width:"6",height:"8"})]}),u=[{value:"mass",label:(0,t.__)("Mass","parish-core")},{value:"confession",label:(0,t.__)("Confession","parish-core")},{value:"adoration",label:(0,t.__)("Adoration","parish-core")},{value:"rosary",label:(0,t.__)("Rosary","parish-core")},{value:"other",label:(0,t.__)("Other","parish-core")}];(0,r.registerBlockType)("parish/church-schedule",{title:(0,t.__)("Church Schedule","parish-core"),description:(0,t.__)("Display liturgical schedules for a church with Font Awesome icons. Works in Query Loops.","parish-core"),icon:d,category:"widgets",keywords:[(0,t.__)("church","parish-core"),(0,t.__)("schedule","parish-core"),(0,t.__)("times","parish-core"),(0,t.__)("mass","parish-core"),(0,t.__)("confession","parish-core")],usesContext:["postType","postId"],edit:function({attributes:e,setAttributes:r,context:o}){const i=(0,s.useBlockProps)(),{showIcon:l,showLivestream:c,showAllDays:p,eventTypes:_,iconColor:d,timeColor:x}=e;return(0,n.jsxs)("div",{...i,children:[(0,n.jsxs)(s.InspectorControls,{children:[(0,n.jsxs)(a.PanelBody,{title:(0,t.__)("Display Settings","parish-core"),initialOpen:!0,children:[(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Show Clock Icon","parish-core"),help:(0,t.__)("Display clock icon at the start of each row.","parish-core"),checked:!1!==l,onChange:e=>r({showIcon:e}),__nextHasNoMarginBottom:!0}),(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Show All Days","parish-core"),help:(0,t.__)('Show all days of the week, with "No events" for days without scheduled events.',"parish-core"),checked:p,onChange:e=>r({showAllDays:e}),__nextHasNoMarginBottom:!0}),(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Show Livestream Indicators","parish-core"),help:(0,t.__)("Display video icon for livestreamed services.","parish-core"),checked:c,onChange:e=>r({showLivestream:e}),__nextHasNoMarginBottom:!0}),(0,n.jsx)(a.BaseControl,{label:(0,t.__)("Event Types to Show","parish-core"),__nextHasNoMarginBottom:!0,children:u.map(e=>(0,n.jsx)(a.CheckboxControl,{label:e.label,checked:(_||["mass","confession"]).includes(e.value),onChange:()=>(e=>{const o=_||["mass","confession"];o.includes(e)?r({eventTypes:o.filter(r=>r!==e)}):r({eventTypes:[...o,e]})})(e.value),__nextHasNoMarginBottom:!0},e.value))})]}),(0,n.jsxs)(a.PanelBody,{title:(0,t.__)("Colors","parish-core"),initialOpen:!1,children:[(0,n.jsx)(a.BaseControl,{label:(0,t.__)("Icon Color","parish-core"),help:(0,t.__)("Color for clock and video icons. Leave empty to use theme accent color.","parish-core"),__nextHasNoMarginBottom:!0,children:(0,n.jsx)(a.ColorPicker,{color:d||"#609fae",onChange:e=>r({iconColor:e}),enableAlpha:!1})}),(0,n.jsx)(a.BaseControl,{label:(0,t.__)("Time Color","parish-core"),help:(0,t.__)("Color for time text. Leave empty to use theme accent color.","parish-core"),__nextHasNoMarginBottom:!0,children:(0,n.jsx)(a.ColorPicker,{color:x||"#609fae",onChange:e=>r({timeColor:e}),enableAlpha:!1})})]})]}),(0,n.jsx)(h(),{block:"parish/church-schedule",attributes:e,urlQueryArgs:{post_id:o.postId},EmptyResponsePlaceholder:()=>(0,n.jsx)("div",{className:"parish-church-schedule-placeholder",children:(0,n.jsx)("p",{children:(0,t.__)("Church Schedule — Add this block inside a Church Query Loop to display the schedule.","parish-core")})}),ErrorResponsePlaceholder:()=>(0,n.jsx)("div",{className:"parish-church-schedule-placeholder",children:(0,n.jsx)("p",{children:(0,t.__)("Error loading schedule. Make sure this block is inside a Church Query Loop.","parish-core")})})})]})},save:()=>null});const x=(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),(0,n.jsx)("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),(0,n.jsx)("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),(0,n.jsx)("line",{x1:"3",x2:"21",y1:"10",y2:"10"}),(0,n.jsx)("path",{d:"M8 14h.01"}),(0,n.jsx)("path",{d:"M12 14h.01"}),(0,n.jsx)("path",{d:"M16 14h.01"}),(0,n.jsx)("path",{d:"M8 18h.01"}),(0,n.jsx)("path",{d:"M12 18h.01"})]}),g=[{value:"",label:(0,t.__)("All Types","parish-core")},{value:"mass",label:(0,t.__)("Mass Only","parish-core")},{value:"confession",label:(0,t.__)("Confession Only","parish-core")},{value:"adoration",label:(0,t.__)("Adoration Only","parish-core")},{value:"rosary",label:(0,t.__)("Rosary Only","parish-core")}];(0,r.registerBlockType)("parish/today-mass",{title:(0,t.__)("Today Mass","parish-core"),description:(0,t.__)("Display today's Mass times across all churches or for a specific church.","parish-core"),icon:x,category:"widgets",keywords:[(0,t.__)("today","parish-core"),(0,t.__)("mass","parish-core"),(0,t.__)("schedule","parish-core"),(0,t.__)("times","parish-core"),(0,t.__)("daily","parish-core")],edit:function({attributes:e,setAttributes:r}){const i=(0,s.useBlockProps)(),{churchId:l,eventType:c,showIcon:p,showDate:_,showNotes:d,iconColor:u,timeColor:x}=e,y=(0,o.useSelect)(e=>e("core").getEntityRecords("postType","parish_church",{per_page:-1,_fields:["id","title"]}),[]),m=[{value:0,label:(0,t.__)("All Churches","parish-core")}];return y&&y.forEach(e=>{m.push({value:e.id,label:e.title.rendered||(0,t.__)("(no title)","parish-core")})}),(0,n.jsxs)("div",{...i,children:[(0,n.jsxs)(s.InspectorControls,{children:[(0,n.jsxs)(a.PanelBody,{title:(0,t.__)("Display Settings","parish-core"),initialOpen:!0,children:[void 0===y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Spinner,{})," ",(0,t.__)("Loading churches...","parish-core")]}):(0,n.jsx)(a.SelectControl,{label:(0,t.__)("Church","parish-core"),value:l||0,options:m,onChange:e=>r({churchId:parseInt(e,10)}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,n.jsx)(a.SelectControl,{label:(0,t.__)("Event Type","parish-core"),value:c,options:g,onChange:e=>r({eventType:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Show Icon","parish-core"),help:(0,t.__)("Display video/live icon.","parish-core"),checked:!1!==p,onChange:e=>r({showIcon:e}),__nextHasNoMarginBottom:!0}),(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Show Date","parish-core"),help:(0,t.__)("Display today's date above the schedule.","parish-core"),checked:_,onChange:e=>r({showDate:e}),__nextHasNoMarginBottom:!0}),(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Show Notes","parish-core"),help:(0,t.__)("Display notes for each Mass time.","parish-core"),checked:d,onChange:e=>r({showNotes:e}),__nextHasNoMarginBottom:!0})]}),(0,n.jsxs)(a.PanelBody,{title:(0,t.__)("Colors","parish-core"),initialOpen:!1,children:[(0,n.jsx)(a.BaseControl,{label:(0,t.__)("Icon Color","parish-core"),help:(0,t.__)("Color for clock and video icons.","parish-core"),__nextHasNoMarginBottom:!0,children:(0,n.jsx)(a.ColorPicker,{color:u||"#609fae",onChange:e=>r({iconColor:e}),enableAlpha:!1})}),(0,n.jsx)(a.BaseControl,{label:(0,t.__)("Time Color","parish-core"),help:(0,t.__)("Color for time text.","parish-core"),__nextHasNoMarginBottom:!0,children:(0,n.jsx)(a.ColorPicker,{color:x||"#609fae",onChange:e=>r({timeColor:e}),enableAlpha:!1})})]})]}),(0,n.jsx)(h(),{block:"parish/today-mass",attributes:e,EmptyResponsePlaceholder:()=>(0,n.jsx)("div",{className:"parish-today-mass-placeholder",children:(0,n.jsx)("p",{children:(0,t.__)("Today Mass — Displays today's Mass times.","parish-core")})}),ErrorResponsePlaceholder:()=>(0,n.jsx)("div",{className:"parish-today-mass-placeholder",children:(0,n.jsx)("p",{children:(0,t.__)("Error loading schedule.","parish-core")})})})]})},save:()=>null});const y=(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),(0,n.jsx)("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),(0,n.jsx)("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),(0,n.jsx)("line",{x1:"3",x2:"21",y1:"10",y2:"10"}),(0,n.jsx)("line",{x1:"9",x2:"9",y1:"14",y2:"14"}),(0,n.jsx)("line",{x1:"15",x2:"15",y1:"14",y2:"14"}),(0,n.jsx)("line",{x1:"9",x2:"9",y1:"18",y2:"18"}),(0,n.jsx)("line",{x1:"15",x2:"15",y1:"18",y2:"18"})]}),m=[{value:"upcoming",label:(0,t.__)("All Upcoming Events","parish-core")},{value:"today",label:(0,t.__)("Today's Events","parish-core")},{value:"week",label:(0,t.__)("This Week's Events","parish-core")}];(0,r.registerBlockType)("parish/events",{title:(0,t.__)("Events","parish-core"),description:(0,t.__)("Display parish events with filtering by sacrament, church, or cemetery. Auto-detects context when placed on church/cemetery pages.","parish-core"),icon:y,category:"widgets",keywords:[(0,t.__)("events","parish-core"),(0,t.__)("calendar","parish-core"),(0,t.__)("today","parish-core"),(0,t.__)("week","parish-core"),(0,t.__)("schedule","parish-core"),(0,t.__)("upcoming","parish-core"),(0,t.__)("sacrament","parish-core")],edit:function({attributes:e,setAttributes:r}){const i=(0,s.useBlockProps)(),{view:l,limit:c,sacrament:p,churchId:_,cemeteryId:d,autoDetect:u,showIcon:x,iconColor:g,timeColor:y}=e,{sacraments:C,isLoadingSacraments:j}=(0,o.useSelect)(e=>{const{getEntityRecords:r,isResolving:o}=e("core");return{sacraments:r("taxonomy","parish_sacrament",{per_page:-1,orderby:"name",order:"asc"}),isLoadingSacraments:o("getEntityRecords",["taxonomy","parish_sacrament",{per_page:-1,orderby:"name",order:"asc"}])}},[]),{churches:v,isLoadingChurches:b}=(0,o.useSelect)(e=>{const{getEntityRecords:r,isResolving:o}=e("core");return{churches:r("postType","parish_church",{per_page:-1,orderby:"title",order:"asc",status:"publish"}),isLoadingChurches:o("getEntityRecords",["postType","parish_church",{per_page:-1,orderby:"title",order:"asc",status:"publish"}])}},[]),{cemeteries:w,isLoadingCemeteries:f}=(0,o.useSelect)(e=>{const{getEntityRecords:r,isResolving:o}=e("core");return{cemeteries:r("postType","parish_cemetery",{per_page:-1,orderby:"title",order:"asc",status:"publish"}),isLoadingCemeteries:o("getEntityRecords",["postType","parish_cemetery",{per_page:-1,orderby:"title",order:"asc",status:"publish"}])}},[]),S=[{value:"",label:(0,t.__)("All Sacraments","parish-core")}];C&&C.forEach(e=>{S.push({value:e.slug,label:e.name})});const k=[{value:0,label:u?(0,t.__)("Auto-detect / All","parish-core"):(0,t.__)("All Churches","parish-core")}];v&&v.forEach(e=>{k.push({value:e.id,label:e.title.rendered})});const B=[{value:0,label:u?(0,t.__)("Auto-detect / All","parish-core"):(0,t.__)("All Cemeteries","parish-core")}];return w&&w.forEach(e=>{B.push({value:e.id,label:e.title.rendered})}),(0,n.jsxs)("div",{...i,children:[(0,n.jsxs)(s.InspectorControls,{children:[(0,n.jsxs)(a.PanelBody,{title:(0,t.__)("Display Settings","parish-core"),initialOpen:!0,children:[(0,n.jsx)(a.SelectControl,{label:(0,t.__)("View","parish-core"),value:l,options:m,onChange:e=>r({view:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,n.jsx)(a.RangeControl,{label:(0,t.__)("Maximum Events","parish-core"),value:c,onChange:e=>r({limit:e}),min:1,max:50,__nextHasNoMarginBottom:!0}),(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Show Calendar Icon","parish-core"),help:(0,t.__)("Display calendar icon next to event titles.","parish-core"),checked:!1!==x,onChange:e=>r({showIcon:e}),__nextHasNoMarginBottom:!0})]}),(0,n.jsxs)(a.PanelBody,{title:(0,t.__)("Filters","parish-core"),initialOpen:!0,children:[(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Auto-detect Context","parish-core"),help:(0,t.__)("Automatically filter by church/cemetery when block is on those pages.","parish-core"),checked:!1!==u,onChange:e=>r({autoDetect:e}),__nextHasNoMarginBottom:!0}),j?(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 0"},children:[(0,n.jsx)(a.Spinner,{}),(0,n.jsx)("span",{children:(0,t.__)("Loading sacraments...","parish-core")})]}):(0,n.jsx)(a.SelectControl,{label:(0,t.__)("Sacrament","parish-core"),value:p,options:S,onChange:e=>r({sacrament:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),b?(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 0"},children:[(0,n.jsx)(a.Spinner,{}),(0,n.jsx)("span",{children:(0,t.__)("Loading churches...","parish-core")})]}):(0,n.jsx)(a.SelectControl,{label:(0,t.__)("Church","parish-core"),value:_,options:k,onChange:e=>r({churchId:parseInt(e,10)}),help:u&&0===_?(0,t.__)("Will auto-detect on church pages.","parish-core"):"",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),f?(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 0"},children:[(0,n.jsx)(a.Spinner,{}),(0,n.jsx)("span",{children:(0,t.__)("Loading cemeteries...","parish-core")})]}):(0,n.jsx)(a.SelectControl,{label:(0,t.__)("Cemetery","parish-core"),value:d,options:B,onChange:e=>r({cemeteryId:parseInt(e,10)}),help:u&&0===d?(0,t.__)("Will auto-detect on cemetery pages.","parish-core"):"",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})]}),(0,n.jsxs)(a.PanelBody,{title:(0,t.__)("Colors","parish-core"),initialOpen:!1,children:[(0,n.jsx)(a.BaseControl,{label:(0,t.__)("Icon Color","parish-core"),help:(0,t.__)("Color for calendar and location icons.","parish-core"),__nextHasNoMarginBottom:!0,children:(0,n.jsx)(a.ColorPicker,{color:g||"#609fae",onChange:e=>r({iconColor:e}),enableAlpha:!1})}),(0,n.jsx)(a.BaseControl,{label:(0,t.__)("Date/Time Color","parish-core"),help:(0,t.__)("Color for date and time text.","parish-core"),__nextHasNoMarginBottom:!0,children:(0,n.jsx)(a.ColorPicker,{color:y||"#609fae",onChange:e=>r({timeColor:e}),enableAlpha:!1})})]})]}),(0,n.jsx)(h(),{block:"parish/events",attributes:e,EmptyResponsePlaceholder:()=>(0,n.jsx)("div",{className:"parish-events-placeholder",children:(0,n.jsx)("p",{children:(0,t.__)("Events — Displays parish events. Configure filters in the sidebar.","parish-core")})}),ErrorResponsePlaceholder:()=>(0,n.jsx)("div",{className:"parish-events-placeholder",children:(0,n.jsx)("p",{children:(0,t.__)("Error loading events.","parish-core")})})})]})},save:()=>null});const C=(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),(0,n.jsx)("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),(0,n.jsx)("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),(0,n.jsx)("line",{x1:"3",x2:"21",y1:"10",y2:"10"}),(0,n.jsx)("rect",{x:"6",y:"13",width:"3",height:"3",fill:"currentColor"}),(0,n.jsx)("rect",{x:"10.5",y:"13",width:"3",height:"3",fill:"currentColor"}),(0,n.jsx)("rect",{x:"15",y:"13",width:"3",height:"3",fill:"currentColor"})]});(0,r.registerBlockType)("parish/events-calendar",{title:(0,t.__)("Events Calendar","parish-core"),description:(0,t.__)("Display a full month calendar of parish events with iCal subscription and download options.","parish-core"),icon:C,category:"widgets",keywords:[(0,t.__)("calendar","parish-core"),(0,t.__)("events","parish-core"),(0,t.__)("month","parish-core"),(0,t.__)("ical","parish-core"),(0,t.__)("subscribe","parish-core"),(0,t.__)("google calendar","parish-core")],edit:function({attributes:e,setAttributes:r}){const i=(0,s.useBlockProps)(),{sacrament:l,churchId:c,cemeteryId:p,autoDetect:_,showSubscribe:d,showDownload:u,iconColor:x,timeColor:g}=e,{sacraments:y,isLoadingSacraments:m}=(0,o.useSelect)(e=>{const{getEntityRecords:r,isResolving:o}=e("core");return{sacraments:r("taxonomy","parish_sacrament",{per_page:-1,orderby:"name",order:"asc"}),isLoadingSacraments:o("getEntityRecords",["taxonomy","parish_sacrament",{per_page:-1,orderby:"name",order:"asc"}])}},[]),{churches:C,isLoadingChurches:j}=(0,o.useSelect)(e=>{const{getEntityRecords:r,isResolving:o}=e("core");return{churches:r("postType","parish_church",{per_page:-1,orderby:"title",order:"asc",status:"publish"}),isLoadingChurches:o("getEntityRecords",["postType","parish_church",{per_page:-1,orderby:"title",order:"asc",status:"publish"}])}},[]),{cemeteries:v,isLoadingCemeteries:b}=(0,o.useSelect)(e=>{const{getEntityRecords:r,isResolving:o}=e("core");return{cemeteries:r("postType","parish_cemetery",{per_page:-1,orderby:"title",order:"asc",status:"publish"}),isLoadingCemeteries:o("getEntityRecords",["postType","parish_cemetery",{per_page:-1,orderby:"title",order:"asc",status:"publish"}])}},[]),w=[{value:"",label:(0,t.__)("All Sacraments","parish-core")}];y&&y.forEach(e=>{w.push({value:e.slug,label:e.name})});const f=[{value:0,label:_?(0,t.__)("Auto-detect / All","parish-core"):(0,t.__)("All Churches","parish-core")}];C&&C.forEach(e=>{f.push({value:e.id,label:e.title.rendered})});const S=[{value:0,label:_?(0,t.__)("Auto-detect / All","parish-core"):(0,t.__)("All Cemeteries","parish-core")}];return v&&v.forEach(e=>{S.push({value:e.id,label:e.title.rendered})}),(0,n.jsxs)("div",{...i,children:[(0,n.jsxs)(s.InspectorControls,{children:[(0,n.jsxs)(a.PanelBody,{title:(0,t.__)("Display Settings","parish-core"),initialOpen:!0,children:[(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Show Subscribe Buttons","parish-core"),help:(0,t.__)("Show iCal and Google Calendar subscribe buttons.","parish-core"),checked:!1!==d,onChange:e=>r({showSubscribe:e}),__nextHasNoMarginBottom:!0}),(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Show Download Button","parish-core"),help:(0,t.__)("Show button to download .ics file.","parish-core"),checked:!1!==u,onChange:e=>r({showDownload:e}),__nextHasNoMarginBottom:!0})]}),(0,n.jsxs)(a.PanelBody,{title:(0,t.__)("Filters","parish-core"),initialOpen:!0,children:[(0,n.jsx)(a.ToggleControl,{label:(0,t.__)("Auto-detect Context","parish-core"),help:(0,t.__)("Automatically filter by church/cemetery when on those pages.","parish-core"),checked:!1!==_,onChange:e=>r({autoDetect:e}),__nextHasNoMarginBottom:!0}),m?(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 0"},children:[(0,n.jsx)(a.Spinner,{}),(0,n.jsx)("span",{children:(0,t.__)("Loading sacraments...","parish-core")})]}):(0,n.jsx)(a.SelectControl,{label:(0,t.__)("Sacrament","parish-core"),value:l,options:w,onChange:e=>r({sacrament:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),j?(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 0"},children:[(0,n.jsx)(a.Spinner,{}),(0,n.jsx)("span",{children:(0,t.__)("Loading churches...","parish-core")})]}):(0,n.jsx)(a.SelectControl,{label:(0,t.__)("Church","parish-core"),value:c,options:f,onChange:e=>r({churchId:parseInt(e,10)}),help:_&&0===c?(0,t.__)("Will auto-detect on church pages.","parish-core"):"",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),b?(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 0"},children:[(0,n.jsx)(a.Spinner,{}),(0,n.jsx)("span",{children:(0,t.__)("Loading cemeteries...","parish-core")})]}):(0,n.jsx)(a.SelectControl,{label:(0,t.__)("Cemetery","parish-core"),value:p,options:S,onChange:e=>r({cemeteryId:parseInt(e,10)}),help:_&&0===p?(0,t.__)("Will auto-detect on cemetery pages.","parish-core"):"",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})]}),(0,n.jsxs)(a.PanelBody,{title:(0,t.__)("Colors","parish-core"),initialOpen:!1,children:[(0,n.jsx)(a.BaseControl,{label:(0,t.__)("Accent Color","parish-core"),help:(0,t.__)("Color for today highlight and event indicators.","parish-core"),__nextHasNoMarginBottom:!0,children:(0,n.jsx)(a.ColorPicker,{color:x||"#609fae",onChange:e=>r({iconColor:e}),enableAlpha:!1})}),(0,n.jsx)(a.BaseControl,{label:(0,t.__)("Time Color","parish-core"),help:(0,t.__)("Color for event times.","parish-core"),__nextHasNoMarginBottom:!0,children:(0,n.jsx)(a.ColorPicker,{color:g||"#609fae",onChange:e=>r({timeColor:e}),enableAlpha:!1})})]})]}),(0,n.jsx)(h(),{block:"parish/events-calendar",attributes:e,EmptyResponsePlaceholder:()=>(0,n.jsx)("div",{className:"parish-events-calendar-placeholder",children:(0,n.jsx)("p",{children:(0,t.__)("Events Calendar — Displays a full month calendar with subscription options.","parish-core")})}),ErrorResponsePlaceholder:()=>(0,n.jsx)("div",{className:"parish-events-calendar-placeholder",children:(0,n.jsx)("p",{children:(0,t.__)("Error loading calendar.","parish-core")})})})]})},save:()=>null}),(0,r.registerBlockType)("parish/related-church",{title:(0,t.__)("Related Church","parish-core"),description:(0,t.__)("Select the church this notice relates to.","parish-core"),icon:"building",category:"widgets",supports:{html:!1},attributes:{relatedChurch:{type:"string",source:"meta",meta:"parish_related_church"}},edit:function({attributes:e,setAttributes:r}){const{relatedChurch:i}=e,l=(0,o.useSelect)(e=>e("core").getEntityRecords("postType","parish_church",{per_page:-1,_fields:["id","title","link"]}),[]);if(void 0===l)return(0,n.jsxs)("div",{className:"parish-related-church-block",children:[(0,n.jsx)(a.Spinner,{})," ",(0,t.__)("Loading churches...","parish-core")]});const c=[{label:(0,t.__)("Select a church","parish-core"),value:""},...l.map(e=>({label:e.title.rendered||(0,t.__)("(no title)","parish-core"),value:String(e.id)}))],h=l.find(e=>String(e.id)===String(i));return(0,n.jsxs)("div",{className:"parish-related-church-block",children:[(0,n.jsx)(s.InspectorControls,{children:(0,n.jsx)(a.PanelBody,{title:(0,t.__)("Related Church","parish-core"),children:(0,n.jsx)(a.SelectControl,{label:(0,t.__)("Church","parish-core"),value:i||"",options:c,onChange:e=>r({relatedChurch:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})})}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:(0,t.__)("Related Church:","parish-core")})," ",h?h.title.rendered:(0,t.__)("None selected","parish-core")]})]})},save:()=>null})})();